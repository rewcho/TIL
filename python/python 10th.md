- dump는 파일에 관한 것이고, dumps는 문자열에 관한 것이다.
# MQTT(IoT 가장 중요한 파트!!!!!!)
- MQTT는 일종의 message bus system에 해당한다.
- MQTT broker가 서버의 역할을 담당하며, sensor는 확인된 데이터를 broker에게 전송한다.
- 데이터 관리는 broker가 담당하며, monitor는 broker를 통해 정보를 전송받는다. 이때 받는 moniter를 subscriber라 한다.
- 그러나 broker는 가장 최신의 데이터만 보관하며, 과거 data는 구독자가 미리 저장을 해놓아야 확인이 가능하다.
- 제어를 하기 위해서 iot 장비가 구독자가 되는 경우도 있다.
- topic이란 데이터의 설명 정보에 해당하며, publish는 토픽을 발행하고 subscriber는 토픽을 구독한다.
- publish와 subscribe 모두 broker 서버에 연다.
- 기기는 필요에 따라서 2개 이상의 역할을 할 수 있다.
- 토픽은 슬래시(/)를 이용해서 정보를 계층적으로 구성할 수 있다.
- ip는 전송은 해주나 data를 check하지는 않고 메세지는 분실되거나, 오류가 있거나, 중복되거나 할 수 있기 때문에 TCP가 수신된 메시지를 받아 교정된 메세지를 얻는다.
- QoS의 경우 3단계를 제공하는데, 0은 전달만 하는 경우, 1은 전달받은 것만 확인을 하고, 2는 정보 추적을 해서 품질이 좋으나, 고성능을 요구한다. 대부분의 IoT장비는 0~1정도만 감당한다.
- mosquitto에서 mosquitto_pub는 publisher에 해당하고 mosquitto_sub는 subscriber에 해당한다.

- cmd에서 자신의 ip주소를 알기 위해서는 ipconfig로 검색하면 된다.

- 환경변수를 변경했을 때 재부팅을 해야 반영이 된다.
- 환경변수를 설정하려면 내 컴퓨터의 우클릭을 하여 속성란에 들어간 다음 왼쪽 단락에 고급 실행 설정을 들어가서 설정하면 된다.
- cmd에서 wildcard는 #이 해당하며 모든 레벨에 대한 값을 받는다.
- 또다른 wildcard로 +가 있으며 이것은 하나의 레벨에서만 허용한다.
- client 객체를 만들 때 기본적으로 id는 랜덤해서 만들어지나 아두이노는 그렇지가 않아서 둘 이상의 id를 받게 되면 오작동하게 된다.
- port의 default는 '1883'이다.
- 동기식 : 함수가 호출되고, 그 작업이 끝날 때까지 기다리다가 작업이 끝나면 return이 된다.
- 비동기 연결 :_async라는 접미어가 있으며 요청만 하고 바로 return이 안된다. 접속이 안 된 상황일 수도 있기 때문에 바로 코드를 짜서 적용하면 안 된다.
- 네트워크 루프는 subscriber에게 매우 중요한 것으로 지속적으로 수신을 해야하기 때문이다.
- loop_start()는 새로운 스레드를 생성하고 무한루프를 하면서 loop()를 호출함
- 생성되는 스레드는 데몬 스레도(메인 스레드가 종료할 때 같이 종료됨.)로 실행하거나 멈출 수 있음
- loop_forever()는 현재 스레드가 무한루프를 실행하면서 loop처리하는 것으로, 현재 스레드로 다른 작업은 할 수가 없다.
- callback은 함수호출(call)을 내가 하는 것이 아니라 시스템이 호출을(back) 한다는 의미. 이 당시 호출되는 함수를 `핸들러`라고 부른다.
- 이벤트를 부르는 함수 접두어로 on_이 있으며 함수호출을 제떄 받았다는 의미이다.(?)
- 연결을 성공했으면 0이 뜨나 그렇지 않으면 1~5에 해당한다. 보통 방화벽, 잘못된 publisher연결 등이 있다.
- subscriber에게 중요한 콜백으로 on_message(client<mqttc>, userdata, message<topic, payload, qos 등등>)



가장 중요한 공부는 class

그 다음에 중요한 공부는 mqtt